<LINK REL=StyleSheet HREF="style.css" TYPE="text/css">
<h2>creating my own blogging platform - part 1</h2>
<h4>Thu 07/19/18</h4>
<p>Today I've started working on creating a new blogging platform for my website.
Previously I had my blog setup with Wordpress, but I found that I wasn't using it much,
and that it provided much more than I needed.</p>
<p>As a minimalist, I like the idea of a barebones style platform that I can create all the features
for. It should be easy to install and mantain, which means using as little packages as possible.
Currently the features that I am aiming for are the following:</p>
<ul>
<li>index page for the blog where all the posts are listed in chronological order</li>
<li>a way for me to easily publish a markdown file</li>
<li>a serverless backend using the AWS ecosystem</li>
<li>a commenting system</li>
</ul>
<p>For this post I will focus on the first item.</p>
<p>Publishing a markdown file has two steps:</p>
<ul>
<li>create a new html file from a markdown file</li>
<li>update contents of blog.html to include a link to the new page.</li>
</ul>
<p>Both of these are straightfoward. First I need a way convert markdown to html.</p>
<pre><code>sudo pip install markdown
</code></pre>
<p>Perfect!</p>
<p>Then I will need to open the markdown file, read it into a string, pass it into markdown(),
and finally write it into a file. The only information the program will need for me
is the post number, which can come from a command line argument.</p>
<p>After this the script will have to insert a new <code>&lt;li&gt;</code> element into blog.html.</p>
<pre><code>&lt;li&gt;&lt;a href="posts/4.html"&gt;creating my own blogging plaform&lt;/a&gt;&lt;/li&gt;
</code></pre>
<p>This needs two things: the link, and the title of the post.
The link will always be 'posts/(post-number).html', so that's easy. The title can be found by looking
at the first line of the markdown post. Here's the python:</p>
<pre><code>    #!/usr/bin/python3
    from markdown import markdown
    from sys      import argv
    """
    adds a new &lt;li&gt; element to the &lt;ol&gt; in blog.html
    this always adds it to the end
    """
    def add_entry_to_list(post_num) :
        post_num = str(post_num)
        md     = open(post_num+'.md')
        header = md.readline()[3:-1] #slice omits the beginning hashes and trailing \n
        md.close()
        html = open('../blog.html')
        lines = html.readlines()
        html.close()
        new_element = ' &lt;li&gt;&lt;a href="posts/'+post_num+'.html"&gt;'+header+'&lt;/a&gt;&lt;/li&gt;\n'
        for i in range(0,len(lines)) :
            if lines[i] == new_element:
                print('list item already exists')
                return
            if lines[i] == '&lt;/ol&gt;\n' :
                lines.insert(i,new_element)
                break
        html = open('../blog.html','wt')
        html.writelines(lines)
        html.close()
        print('new list item created')
        return True
    """
    reads from the markdown file (post_num).md and writes (post_num).html
    """
    def add_entry(post_num) :
        try :
            md = open(post_num+'.md')
        except :
            print(post_num+'.md'+' does not exist!')
            return
        html = markdown(md.read())
        md.close()
        post = open(post_num+'.html','wt')
        post.write(html)
        post.close()
        print('post updated')
        add_entry_to_list(post_num)
    if __name__ == '__main__' :
        post_num = argv[1]
        add_entry(post_num)
</code></pre>
<p>Next up is styling the plain markdown. I'm all for minimlism, but plain markdown
is a bit bland. Margins and better looking code snippets are a must. To add the style I'll add a <code>&lt;LINK&gt;</code> tag
to beginning of the markdown string so that all of the posts can use the same style sheet.</p>
<pre><code>html = '&lt;LINK REL=StyleSheet HREF="style.css" TYPE="text/css"&gt;\n' + html
</code></pre>
<p>Padding and a lightgrey background will made it a bit easier on the eyes. For the code snippets I'll
make a thin outline, and give them a lighter background so that it stands out. The header should
be in the center.</p>
<pre><code>    html {
        padding: 25px;
        background: darkgrey;
    }
    body {
        background: lightgrey;
        padding:10px;
        outline: solid darkslateblue 2px;
    }
    h2 {
        margin: auto;
        text-align: center;
    }
    pre {/* wrapper for &lt;code&gt; tag */
        outline: solid black 1px;
        background: whitesmoke;
        padding: 5px;
    }
</code></pre>
<p><button id="before-after"> Before/After </button>
<script>
document.getElementById('before-after').addEventListener('click',function() {
  document.styleSheets[0].disabled = !document.styleSheets[0].disabled;
});
</script></p>
<p>A great part of markdown is that you can add any html tag whenever you need it. So my blog will
be able to support whatever interactive elements I feel like making. Pretty cool!</p>
<pre><code>&lt;button id="before-after"&gt; Before/After &lt;/button&gt;
&lt;script&gt;
document.getElementById('before-after').addEventListener('click',function() {
  document.styleSheets[0].disabled = !document.styleSheets[0].disabled;
});
&lt;/script&gt;
</code></pre>
<p>The style looks okay for now but in the future I would like to experiment with some gradients. Also
syntax highlighting in code snippets would be awesome, but writing the css for that would take
forever, or I would have to use someone elses stylesheets. Gross!</p>