<!DOCTYPE html>
<head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1" name="viewport" />
  <LINK REL=StyleSheet HREF="old_style.css" TYPE="text/css">
</head>
<div id="content-wrapper">
  <div class="header">
    <form action="../blog.html">
      <input type="submit" value="blog" />
    </form>
  </div>

<h2>Creating My Own Blogging Platform</h2>
<h4>Thu 07/19/18</h4>
<hr />
<p>Today I've started working on creating a new blogging platform for my website.
Previously I had my blog setup with Wordpress, but I found that I wasn't using it much,
and that it provided much more than I needed.</p>
<p>As a minimalist, I like the idea of a barebones style platform that I can create all the features
for. It should be easy to install and maintain, which means using as little packages as possible.
Currently the features that I am aiming for are the following:</p>
<ul>
<li>index page for the blog where all the posts are listed in reverse chronological order</li>
<li>a way for me to easily publish a markdown file</li>
<li>a serverless backend using the AWS ecosystem</li>
<li>a commenting system</li>
</ul>
<p>For this post I will focus on the first two items.</p>
<p>Publishing a markdown file has two steps:</p>
<ul>
<li>create a new html file from a markdown file</li>
<li>update contents of blog.html to include a link to the new page.</li>
</ul>
<p>Both of these are straightforward. First I need a way convert markdown to html.</p>
<pre><code>sudo pip install markdown
</code></pre>
<p>Perfect!</p>
<p>Then I will need to open the markdown file, read it into a string, pass it into markdown(),
and finally write it into a .html file. The only information the program will need for me
is the post number, which can come from a command line argument.</p>
<p>After this the script will have to insert a new table row (<code>&lt;tr&gt;</code>) element into <code>blog.html</code></p>
<pre><code>&lt;tr&gt;&lt;td&gt;&lt;a href="posts/4.html"&gt;creating my own blogging platform - part 1&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Thu 07/19/18&lt;/td&gt;&lt;/tr&gt;
</code></pre>
<p>This needs three things: the link, the date of the post, and the title.
The link will always be 'posts/(post-number).html', so that's easy. The title can be found by looking
at the first line of the .md file, and the date will be on the second line.</p>
<p>The outputted html needs to include a few more things. First a <code>&lt;link&gt;</code> tag so that all the posts
can share the same style sheet:</p>
<pre><code>html = '&lt;LINK REL=StyleSheet HREF="style.css" TYPE="text/css"&gt;\n' + html
</code></pre>
<p>And finally a fixed header so that readers can navigate back to the index page. For this I'll create
a partial file and have the script read it and paste it into the output.</p>
<h4>header.html</h4>
<pre><code>    &lt;div class="header"&gt;
            &lt;form action="../blog.html"&gt;
                &lt;input type="submit" value="blog" /&gt;
            &lt;/form&gt;
    &lt;/div&gt;
</code></pre>
<h4>create_post.py</h4>
<pre><code>    #!/usr/bin/python3
    from markdown import markdown
    from sys      import argv

    """
    adds a new &lt;tr&gt; element to blog.html
    new row will be the first to keep reverse chronoligical order
    """
    def add_entry_to_list(post_num) :
        post_num = str(post_num)
        md     = open(post_num+'.md')
        header = md.readline()[3:-1] #slice omits the beginning hashes and trailing \n
        date   = md.readline()[5:-1]
        md.close()
        html = open('../blog.html')
        lines = html.readlines()
        html.close()
        new_element = '&lt;tr&gt;&lt;td&gt;&lt;a href="posts/'+post_num+'.html"&gt;'+header+'&lt;/a&gt;&lt;/td&gt;&lt;td&gt;'+date+'&lt;/td&gt;&lt;/tr&gt;\n'
        i = len(lines) - 1
        while i &gt; 0 :
            if lines[i].strip() == new_element.strip() :
                print('list item already exists')
                return
            if lines[i].strip() == '&lt;tbody&gt;' :
                lines.insert(i+1,' '*4+new_element) #indent new tag properly and add to file
                print('new list item created')
                html = open('../blog.html','wt')
                html.writelines(lines)
                html.close()
                return
            i -= 1

    """
    reads from the markdown file (post_num).md and writes (post_num).html
    """
    def add_entry(post_num) :
        try :
            md = open(post_num+'.md')
        except :
            print(post_num+'.md'+' does not exist!')
            return
        h = open('header.html')
        header = h.read()
        h.close()
        html = markdown(md.read())
        html = '&lt;LINK REL=StyleSheet HREF="style.css" TYPE="text/css"&gt;\n' + html
        html = header + html
        md.close()
        post = open(post_num+'.html','wt')
        post.write(html)
        post.close()
        print('post updated')
        add_entry_to_list(post_num)

    if __name__ == '__main__' :
        post_num = argv[1]
        add_entry(post_num)
</code></pre>
<p>Next up is adding some CSS.  I'm all for minimalism, but plain markdown is pretty bland.
Padding, a bigger font size, and a light background will made it easier on the eyes.  The post
title should be in the middle and images should be kept from taking the entire page up.</p>
<pre><code>    html {
        padding: 7%;
        background: darkgrey;
    }

    body {
        background: lightgrey;
        padding:10px;
        outline: solid darkslateblue 2px;
    }

    h2 {
        margin: auto;
        text-align: center;
    }

    img {
        display: block;
        width: auto;
        height: auto;
        max-width: 50%;
        margin: 20px auto;
        border-radius:8px;
    }

    p {
        font-size: 18px;
    }
</code></pre>
<p>For the code snippets I'll make a thin outline and give them a lighter background so
that it stands out.</p>
<pre><code>    pre {
        outline: solid black 1px;
        background: whitesmoke;
        padding: 5px;
    }
</code></pre>
<p>The header should be fixed so users don't need to scroll all the way up to go back. A darker
background will work well.</p>
<pre><code>    .header {
        position:fixed;
        top:0px;
        left:0px;
        width:100%;
        background:#5f5f5f;
        color: #CCC;
        padding: 10px 20px 10px 20px;
        font-size:25px;
    }
</code></pre>
<p>Finally the button itself needs colors, and should highlight on mouse over.</p>
<pre><code>    .header form {
        display: inline;
    }
    input {
        background:#5f5f5f;
        color:white;
        border: solid #5f5f5 2px;
        transition-duration: 0.4s;
        border-radius: 4px;
        font-size:20px;
    }

    input:hover {
        background:grey;
        color:white;
        border: solid #5f5f5 2px;
        transition-duration: 0.4s;
        border-radius: 4px;
        font-size:20px;
    }
</code></pre>
<p><button id="before-after"> Before/After </button>
<script>
document.getElementById('before-after').addEventListener('click',function() {
  document.styleSheets[0].disabled = !document.styleSheets[0].disabled;
});
</script></p>
<p>A great part of markdown is that you can add any html tag whenever you need it. So my blog will
be able to support whatever interactive elements I feel like making. Pretty cool!</p>
<pre><code>&lt;button id="before-after"&gt; Before/After &lt;/button&gt;
&lt;script&gt;
document.getElementById('before-after').addEventListener('click',function() {
  document.styleSheets[0].disabled = !document.styleSheets[0].disabled;
});
&lt;/script&gt;
</code></pre>
<p>The style looks okay for now, but I will most likely keep tinkering with it. Syntax highlighting
in code snippets would be awesome, but writing the CSS for that would be a lot of tedious work.
The alternative is just using someone else's style sheets, which is something I'm trying to
stay away from.</p>
